<!DOCTYPE html>
<html>

<head>
    <title>README.md</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    
<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

html,footer,header{
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Custom MD PDF CSS
 */
html,footer,header{
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";

 }
body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>
<link rel="stylesheet" href="file:///r%3A/2.Travail/1.Enseignement/Cours/_1.Outils/2.Developpement/1.SCSS/main.css" type="text/css"><link rel="stylesheet" href="file:///d%3A/rdaros/Cours/_1.Outils/2.Developpement/1.SCSS/main.css" type="text/css">
</head>

<body>
    <h1 id="%F0%9F%8C%90-modern-webapp-med-bastionhost-reverse-proxy-och-automatiserad-cicd">🌐 Modern Webapp med Bastionhost, Reverse Proxy och Automatiserad CI/CD</h1>
<p>Detta är en enkel men robust webbapplikation som inkluderar ett kontaktformulär för användarinteraktion. Applikationen är hostad på en Ubuntu-baserad virtuell server i Azure och skyddas av en bastionhost för säker fjärråtkomst. En reverse proxy används för att hantera och dirigera inkommande trafik, vilket förbättrar både prestanda och säkerhet. Data från kontaktformuläret lagras tryggt i Azure Blob Storage.</p>
<p>Infrastrukturen bygger på flera virtuella servrar: en bastionhost som möjliggör säker administration, en reverse proxy som fungerar som trafikhanterare, samt applikationsservern där webbapplikationen körs. Denna arkitektur säkerställer en välstrukturerad och säker driftmiljö.</p>
<p><a href="https://wavvy.se">https://wavvy.se</a></p>
<p><img src="file:///c:/Users/Max Oredson/webapp/image-1.png" alt="alt text"><br>
<img src="file:///c:/Users/Max Oredson/webapp/image-2.png" alt="alt text"></p>
<hr>
<div style="margin-top: 200px;"></div>
<h1 id="infrastrukturupps%C3%A4ttning-i-azure">Infrastrukturuppsättning i Azure</h1>
<p>För att strukturera projektets infrastruktur på ett säkert och skalbart sätt har jag inledningsvis skapat en resursgrupp vid namn <strong>rg-webapp-mysql.</strong> Denna resursgrupp fungerar som en samlad plats för alla relaterade resurser inom projektet.</p>
<p>Därefter konfigurerades ett virtuellt nätverk med namnet <strong>vnet-webapp-mysql</strong>, vilket är baserat på adressrymden <strong>10.0.0.0/16.</strong> Detta nätverk är indelat i flera undernät (subnets), där varje del har ett tydligt syfte och ansvar för olika komponenter i lösningen:</p>
<table>
<thead>
<tr>
<th>Subnät</th>
<th>Adressrymd</th>
<th>Syfte</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>app-subnet</code></td>
<td><code>10.0.1.0/24</code></td>
<td>Här placeras applikationsservern som kör webbapplikationen.</td>
</tr>
<tr>
<td><code>db-subnet</code></td>
<td><code>10.0.2.0/24</code></td>
<td>Används för att isolera MySQL-databasen i en separat zon.</td>
</tr>
<tr>
<td><code>reverseproxy-subnet</code></td>
<td><code>10.0.3.0/24</code></td>
<td>Innehåller en reverse proxy-server som hanterar trafik mellan klient och applikation.</td>
</tr>
<tr>
<td><code>bastionhost-subnet</code></td>
<td><code>10.0.4.0/24</code></td>
<td>Innehåller en Bastion Host som möjliggör säker administration (SSH) utan att exponera virtuella maskiner direkt mot internet.</td>
</tr>
</tbody>
</table>
<p>Denna uppdelning av nätverket möjliggör förbättrad säkerhet, enklare nätverksadministration och tydligare separering mellan olika typer av resurser.</p>
<h1 id="s%C3%A4kerhetsf%C3%B6rdelar-med-n%C3%A4tverksarkitekturen">Säkerhetsfördelar med nätverksarkitekturen</h1>
<p>Genom att segmentera det virtuella nätverket i dedikerade subnät för olika funktioner uppnås flera viktiga säkerhetsfördelar:</p>
<ul>
<li>🔐 <strong>Nätverksisolering:</strong> Databasen ligger i ett separat db-subnet utan direkt exponering mot internet, vilket minimerar risken för intrång.</li>
<li>🔁 <strong>Trafikstyrning och filtrering:</strong> Med ett separat reverseproxy-subnet kan inkommande trafik kontrolleras och filtreras innan den når applikationen. Detta möjliggör implementation av t.ex. brandväggsregler, TLS-terminering och lastbalansering.</li>
<li>👨‍💻 <strong>Säker administration:</strong> Genom att använda en Bastion Host i ett eget bastionhost-subnet undviks behovet av att öppna portar för SSH direkt mot de virtuella maskinerna. All åtkomst sker via Azure Bastion, vilket erbjuder en säker och spårbar inloggningsmetod.</li>
</ul>
<h1 id="applikationsserver-vm">Applikationsserver (VM)</h1>
<p>Efter att nätverksinfrastrukturen var på plats skapades en virtuell maskin som fungerar som applikationsserver. Denna server är ansvarig för att köra webbapplikationen samt ansluta till databasen via LEMP-stacken (Linux, Nginx, MySQL, PHP).</p>
<p><strong>Konfiguration av virtuell maskin:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Värde</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Namn</strong></td>
<td><code>vm-webapp</code></td>
</tr>
<tr>
<td><strong>Region</strong></td>
<td>North Europe</td>
</tr>
<tr>
<td><strong>Image</strong></td>
<td>Ubuntu Server 22.04 LTS – x64 Gen2</td>
</tr>
<tr>
<td><strong>Storlek</strong></td>
<td>Standard_B1s (kostnadseffektiv för utbildningssyfte)</td>
</tr>
<tr>
<td><strong>Virtuellt nätverk</strong></td>
<td><code>vnet-webapp-mysql</code></td>
</tr>
<tr>
<td><strong>Subnet</strong></td>
<td><code>app-subnet</code> (<code>10.0.1.0/24</code>)</td>
</tr>
</tbody>
</table>
<p>För automatiserad installation och konfiguration av programvaran användes en cloud-init-fil. Denna fil ser till att alla nödvändiga komponenter för applikationsdrift installeras och konfigureras vid uppstart. Cloud-init-konfigurationen är bifogad längst ner i rapporten.</p>
<h2 id="%F0%9F%96%A5%EF%B8%8F-applikationsserver-appserver">🖥️ Applikationsserver (Appserver)</h2>
<p><strong>Operativsystem:</strong> Ubuntu 24.04 LTS</p>
<ul>
<li>Kör webbapplikationen (PHP, MySQL-anslutningar etc.)</li>
<li>Ansvarar för kommunikation med databasen (MySQL)</li>
<li>Tar emot och behandlar trafik från reverse proxy-servern</li>
<li>Hanterar användarsessioner och autentisering</li>
</ul>
<h1 id="reverse-proxy-server-vm">Reverse proxy-server (VM)</h1>
<p>Efter att applikationsservern var på plats skapades en virtuell maskin som fungerar som reverse proxy-server. Denna server ansvarar för att ta emot och hantera alla inkommande HTTP/HTTPS-förfrågningar, vidarebefordra dem till backend-webbservern, samt förbättra säkerheten genom att agera som en barriär mellan internet och interna resurser. Reverse proxy-servern hanterar också SSL-terminering, lastbalansering och kan bidra till att optimera prestanda genom cachning. Reverse Proxy-konfigurationen är bifogad längst ner i rapporten.</p>
<p><strong>Konfiguration av virtuell maskin</strong></p>
<table>
<thead>
<tr>
<th><strong>Parameter</strong></th>
<th>Värde</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Namn</strong></td>
<td><code>vm-reverseproxy</code></td>
</tr>
<tr>
<td><strong>Region</strong></td>
<td>North Europe</td>
</tr>
<tr>
<td><strong>Image</strong></td>
<td>Ubuntu Server 22.04 LTS – x64 Gen2</td>
</tr>
<tr>
<td><strong>Storlek</strong></td>
<td>Standard_B1s (kostnadseffektiv för utbildningssyfte)</td>
</tr>
<tr>
<td><strong>Virtuellt nätverk</strong></td>
<td><code>vnet-webapp-mysql</code></td>
</tr>
<tr>
<td><strong>Subnet</strong></td>
<td><code>reverseproxy-subnet (10.0.3.0/24)</code></td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%96%A5%EF%B8%8F-reverse-proxy-server">🖥️ Reverse Proxy-server</h2>
<p><strong>Operativsystem</strong>: Ubuntu 24.04 LTS</p>
<ul>
<li>Tar emot och hanterar alla inkommande HTTP/HTTPS-förfrågningar</li>
<li>Utför SSL-terminering med hjälp av Let's Encrypt-certifikat</li>
<li>Proxyar och vidarebefordrar trafik till applikationsservern på interna IP-adresser</li>
<li>Förbättrar säkerheten genom att agera som en barriär och begränsa direkt åtkomst till applikationsservern</li>
</ul>
<h1 id="bastion-host-server-vm">Bastion-host server (VM)</h1>
<p>Efter att både applikationsservern och reverse proxy-servern var på plats skapades en virtuell maskin som fungerar som bastion-host. Denna server ansvarar för att ge säker fjärråtkomst till resurser i det privata nätverket, utan att exponera dem direkt mot internet. Bastion-host fungerar som en säker gateway för administration, och minskar risken för obehörig åtkomst genom att centralisera och skydda anslutningarna.</p>
<p><strong>Konfiguration av virtuell maskin</strong></p>
<table>
<thead>
<tr>
<th><strong>Parameter</strong></th>
<th>Värde</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Namn</strong></td>
<td><code>vm-bastion-host</code></td>
</tr>
<tr>
<td><strong>Region</strong></td>
<td>North Europe</td>
</tr>
<tr>
<td><strong>Image</strong></td>
<td>Ubuntu Server 22.04 LTS – x64 Gen2</td>
</tr>
<tr>
<td><strong>Storlek</strong></td>
<td>Standard_B1s (kostnadseffektiv för utbildningssyfte)</td>
</tr>
<tr>
<td><strong>Virtuellt nätverk</strong></td>
<td><code>vnet-webapp-mysql</code></td>
</tr>
<tr>
<td><strong>Subnet</strong></td>
<td><code>bastion-subnet (10.0.4.0/24)</code></td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%96%A5%EF%B8%8F-bastion-host-s%C3%A4ker-ssh-access">🖥️ Bastion Host (Säker SSH-access)</h2>
<ul>
<li>Ger säker fjärråtkomst till resurser i det privata nätverket</li>
<li>Fungerar som en säker gateway för SSH-anslutningar till interna servrar</li>
<li>Används som hopppunkt (ProxyJump) vid fjärradministration och i CI/CD-pipelines</li>
<li>Centraliserar och begränsar åtkomst för att minska risken för obehörig åtkomst</li>
<li>Skyddar interna servrar genom att undvika direkt exponering mot internet</li>
</ul>
<h1 id="databaskonfiguration-azure-database-for-mysql-%E2%80%93-flexible-server">Databaskonfiguration: Azure Database for MySQL – Flexible Server</h1>
<p>För att hantera lagring och hantering av applikationens databas skapades en <strong>Azure Database for MySQL – Flexible Server.</strong> Denna tjänst är optimerad för utvecklingsmiljöer och erbjuder hög tillgänglighet, automatiska säkerhetskopior samt flexibel resurshantering.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Värde</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Servernamn</strong></td>
<td><code>mysql-webapp-01</code></td>
</tr>
<tr>
<td><strong>Region</strong></td>
<td>North Europe</td>
</tr>
<tr>
<td><strong>MySQL-version</strong></td>
<td>5.7</td>
</tr>
<tr>
<td><strong>Arbetsbelastning</strong></td>
<td>Development (optimerad för test och utveckling)</td>
</tr>
<tr>
<td><strong>Beräkning + lagring</strong></td>
<td>Burstable B1ms (1 vCore, 2 GiB RAM), 20 GiB lagring</td>
</tr>
<tr>
<td><strong>Anslutningstyp</strong></td>
<td>Privat anslutning via VNet-integration</td>
</tr>
<tr>
<td><strong>Virtuellt nätverk</strong></td>
<td><code>vnet-webapp-mysql</code></td>
</tr>
<tr>
<td><strong>Subnet</strong></td>
<td><code>db-subnet</code> (<code>10.0.2.0/24</code>)</td>
</tr>
<tr>
<td><strong>Privat DNS-integration</strong></td>
<td>Ja</td>
</tr>
<tr>
<td><strong>Privat DNS-zon</strong></td>
<td><code>mysql.database.azure.com</code></td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%96%A5%EF%B8%8F-databasserver-azure-database-for-mysql">🖥️ Databasserver (Azure Database for MySQL)</h2>
<ul>
<li>Lagrar applikationens strukturerade data (formulärsvar, användarinformation m.m.)</li>
<li>Körs som hanterad tjänst för enklare drift och underhåll</li>
<li>Ansluts privat via VNet för ökad säkerhet</li>
<li>Ger automatisk backup och hög tillgänglighet</li>
<li>Optimerad för utvecklingsmiljö med flexibel resursanvändning</li>
</ul>
<h1 id="applikationsfiler-och-deras-funktion">Applikationsfiler och deras funktion</h1>
<p>För att bygga webbapplikationen skapades ett antal viktiga filer, vilka utgör applikationens backend, frontend och stil. Nedan följer en översikt av varje fil och dess syfte:</p>
<table>
<thead>
<tr>
<th>Filnamn</th>
<th>Syfte</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>database_setup.php</code></td>
<td>Skript för att skapa och konfigurera databastabeller som används av applikationen.</td>
</tr>
<tr>
<td><code>index.html</code></td>
<td>Startsidan för webbapplikationen som visar användarens namn och grundläggande information.</td>
</tr>
<tr>
<td><code>contact_form.html</code></td>
<td>HTML-formulär där användare kan skicka in kontaktmeddelanden.</td>
</tr>
<tr>
<td><code>on_post_contact.php</code></td>
<td>Backend-skript som hanterar formulärdata (POST) från <code>contact_form.html</code> och sparar det i databasen.</td>
</tr>
<tr>
<td><code>on_get_messages.php</code></td>
<td>Backend-skript som hämtar och returnerar sparade meddelanden från databasen (GET).</td>
</tr>
<tr>
<td><code>style.css</code></td>
<td>CSS-fil som innehåller stilmallarna för webbapplikationens visuella utseende.</td>
</tr>
</tbody>
</table>
<p><strong>Sammanfattning</strong></p>
<p>Tillsammans utgör dessa filer en komplett webbapplikation med både frontend och backend som möjliggör insamling, lagring och visning av användarinmatad data, samtidigt som användarupplevelsen förstärks med en separat stilfil.</p>
<h2 id="%F0%9F%A7%B0-funktionalitet">🧰 Funktionalitet</h2>
<ul>
<li>✅ Visar startsida (<code>index.html</code>)</li>
<li>✅ Kontaktformulär (via <code>contact_form.html</code>)</li>
<li>✅ Skickar formulärdata till backend (<code>on_post_contact.php</code>)</li>
<li>✅ Visar sparade meddelanden (<code>on_get_messages.php</code>)</li>
<li>✅ PHP-script för databas-setup (<code>database_setup.php</code>)</li>
<li>✅ Responsiv design via <code>style.css</code></li>
<li>✅ Lagrar formulärsvar i Azure Blob Storage</li>
</ul>
<hr>
<h1 id="%E2%98%81%EF%B8%8F-infrastruktur-s%C3%A4kerhet--deployment">☁️ Infrastruktur, Säkerhet &amp; Deployment</h1>
<p>Denna webbapplikation är byggd med fokus på säkerhet, skalbarhet och effektiv hantering av driftsättningar. Infrastrukturmiljön består av flera virtuella servrar i Azure, där en dedikerad bastionhost möjliggör säker fjärråtkomst, och en reverse proxy hanterar inkommande trafik för att optimera prestanda och skydd. Applikationen körs på en separat virtuell server som är isolerad för att garantera stabilitet och säkerhet.</p>
<p>Deploymentprocessen är automatiserad via en CI/CD-pipeline som säkerställer snabba, pålitliga och reproducerbara leveranser till produktionsmiljön. Detta möjliggör kontinuerliga uppdateringar av applikationen utan driftstopp och med hög kvalitet i varje release.</p>
<h2 id="%F0%9F%93%81-mappstruktur">📁 Mappstruktur</h2>
<p>/webapp</p>
<p>├── contact_form.html</p>
<p>├── database_setup.php</p>
<p>├── index.html</p>
<p>├── on_get_messages.php</p>
<p>├── on_post_contact.php</p>
<p>└── style.css</p>
<h2 id="%E2%98%81%EF%B8%8F-azure-blob-storage">☁️ Azure Blob Storage</h2>
<ul>
<li>Lagrar formulärdata och bifogade filer från webbapplikationen</li>
<li>Formulärsvar sparas som .json-fil i Blob Storage</li>
<li>Svaren lagras i en container som heter <strong>responses</strong></li>
<li>Separat lagring utanför applikationsservern för bättre skalbarhet och säkerhet</li>
<li>Åtkomst sker via API-anrop från applikationen</li>
</ul>
<h2 id="%F0%9F%94%90-s%C3%A4kerhet">🔐 Säkerhet</h2>
<ul>
<li>✅ Endast bastion host är öppen mot internet</li>
<li>✅ Applikationsservern är endast tillgänglig via bastionen (SSH ProxyJump)</li>
<li>✅ SSH-nycklar hanteras säkert via GitHub Secrets</li>
<li>✅ Automatisk uppdatering av serverns known_hosts via pipeline</li>
<li>✅ Brandvägg tillåter endast nödvändig trafik (t.ex. HTTPS via reverse proxy)</li>
<li>✅ TLS/HTTPS används med giltiga certifikat på reverse proxy</li>
</ul>
<h2 id="%F0%9F%94%92-network-security-groups-nsg">🔒 Network Security Groups (NSG)</h2>
<table>
<thead>
<tr>
<th><strong>NSG-namn</strong></th>
<th><strong>Tillämpat på</strong></th>
<th><strong>Port(ar)</strong></th>
<th><strong>Användning / Syfte</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nsg-db-subnet</code></td>
<td>Databassubnet</td>
<td>3306 (MySQL)</td>
<td>Tillåter MySQL-trafik från webbapplikationens subnet <strong>10.0.1.0/24</strong> till databasen</td>
</tr>
<tr>
<td><code>vm-bastionhost-nsg</code></td>
<td>Bastion Host VM</td>
<td>22 (SSH)</td>
<td>Tillåter SSH-åtkomst till bastionhost</td>
</tr>
<tr>
<td><code>vm-reverseproxy-nsg</code></td>
<td>Reverse Proxy VM</td>
<td>80 (HTTP), 443 (HTTPS)</td>
<td>Tillåter kontrollerad HTTP/HTTPS-trafik från internet till reverse proxy för att säkert exponera webbapplikationen</td>
</tr>
<tr>
<td><code>webapp-nsg</code></td>
<td>Applikationsserver VM</td>
<td>80 (HTTP), 22 (SSH)</td>
<td>ASG:erna <code>ReverseProxyASG</code> (HTTP/HTTPS) och <code>BastionHostASG</code> (SSH) används som destination i NSG-regler för att tillåta trafik från reverse proxyn respektive bastionhost till webbapplikationen, som inte är exponerad mot internet.</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%94%92-application-security-groups-asg">🔒 Application Security Groups (ASG)</h2>
<table>
<thead>
<tr>
<th><strong>ASG-namn</strong></th>
<th><strong>Tillämpat på</strong></th>
<th><strong>Användning / Syfte</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ReverseProxyASG</code></td>
<td>Reverse Proxy VM</td>
<td>Används som <strong>destination</strong> i NSG-regel för att tillåta HTTP/HTTPS-trafik till webbapplikationen från reverse proxyn</td>
</tr>
<tr>
<td><code>BastionHostASG</code></td>
<td>Bastion Host VM</td>
<td>Används som <strong>destination</strong> i NSG-regel för att tillåta SSH-trafik till webbapplikationen från bastionhost</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%94%90-github-secrets">🔐 GitHub Secrets</h2>
<p>Nedan visas en översikt över de miljövariabler och hemligheter som används för att ansluta till bastionhost och applikationsservern. Värdena inkluderar både publika och interna IP-adresser, användarnamn samt referens till den privata SSH-nyckeln.</p>
<table>
<thead>
<tr>
<th><strong>Namn</strong></th>
<th><strong>Värde</strong></th>
<th><strong>Beskrivning</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BASTION_HOST</code></td>
<td><code>74.234.34.18</code></td>
<td>Publik IP till bastionhost</td>
</tr>
<tr>
<td><code>BASTION_USER</code></td>
<td><code>azureuser</code></td>
<td>Användare för bastionhost</td>
</tr>
<tr>
<td><code>SSH_PRIVATE_KEY</code></td>
<td>privat SSH-nyckel (<code>~/.ssh/id_rsa</code>)</td>
<td>Privat SSH-nyckel för autentisering</td>
</tr>
<tr>
<td><code>VM_HOST</code></td>
<td><code>10.0.1.4</code></td>
<td>Intern IP till applikationsserver</td>
</tr>
<tr>
<td><code>VM_USER</code></td>
<td><code>azureuser</code></td>
<td>Användare för applikationsserver</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%94%90-hantering-av-ssh-nycklar">🔐 Hantering av SSH-nycklar</h2>
<p>För att möjliggöra säker och automatiserad deployment från GitHub Actions till webbservern används SSH-nyckelbaserad autentisering:</p>
<ul>
<li>Ett nyckelpar (privat + publik) genereras lokalt</li>
<li>Den privata nyckeln (id_rsa) läggs till som en GitHub Secret i repositoryt (SSH_PRIVATE_KEY)</li>
<li>Den publika nyckeln (id_rsa.pub) läggs till i filen ~/.ssh/authorized_keys på:
<ul>
<li>Bastion Host</li>
<li>Appservern</li>
</ul>
</li>
</ul>
<p>GitHub Actions använder sedan nyckeln för att ansluta till servern via SSH och köra deployment-kommandon (t.ex. git pull)</p>
<h2 id="%F0%9F%94%92-https-och-ssltls-s%C3%A4kerhet">🔒 HTTPS och SSL/TLS-säkerhet</h2>
<p>Applikationen är säkrad med HTTPS via ett kostnadsfritt SSL/TLS-certifikat från <strong>Let's Encrypt</strong>. Certifikatet hanteras automatiskt med hjälp av <strong>Certbot</strong>, och installationen sker direkt på reverse proxy-servern (Nginx).</p>
<p><strong>Funktionaliteten bygger på följande:</strong></p>
<ul>
<li><strong>Port 443</strong> är öppen på reverse proxy-servern för att tillåta HTTPS-trafik.</li>
<li><strong>Domänen (<code>wavvy.se</code>) pekar till reverse proxy-serverns IP</strong> via A-poster i DNS (Loopia).</li>
<li><strong>Certbot</strong> används för att automatiskt:
<ul>
<li>Generera och installera SSL-certifikat</li>
<li>Förnya certifikaten regelbundet</li>
</ul>
</li>
<li><strong>Nginx</strong> är konfigurerad att lyssna på både port 80 och 443, och omdirigerar trafik från HTTP till HTTPS.</li>
</ul>
<p><strong>Därmed säkerställs:</strong></p>
<ul>
<li>Krypterad kommunikation mellan klient och server</li>
<li>Skydd mot man-in-the-middle-attacker</li>
<li>Förbättrad SEO och användarförtroende</li>
</ul>
<p>Exempel på tillgänglig tjänst:<br>
https://wavvy.se</p>
<h2 id="%F0%9F%9A%80-cicd-pipeline-med-github-actions">🚀 CI/CD-pipeline med GitHub Actions</h2>
<p>Applikationen använder en CI/CD-pipeline (Continuous Integration &amp; Continuous Deployment) via GitHub Actions för att automatiskt:</p>
<ul>
<li>Bygga och testa kod</li>
<li>Ansluta till webbservern via SSH genom en bastion host och reverse proxy</li>
<li>Utföra git pull för att hämta senaste versionen av koden till servern</li>
<li>Köra eventuella byggsteg (t.ex. php-fpm install, composer install, etc.)</li>
<li>Starta om applikationen vid behov (t.ex. nginx)</li>
<li>Verifiera och hantera miljövariabler och hemligheter via GitHub Secrets</li>
</ul>
<h2 id="%F0%9F%9B%A0%EF%B8%8F-processfl%C3%B6de">🛠️ Processflöde</h2>
<ul>
<li>När en ändring pushas till main-branchen startas arbetsflödet automatiskt.</li>
<li>En GitHub Actions-runner sätter upp en säker SSH-anslutning till bastion host och vidare via reverse proxy till webbservern.</li>
<li>På målsystemet hämtas den senaste koden.</li>
<li>Tjänsten startas om så att ändringarna blir synliga direkt.</li>
</ul>
<h2 id="%F0%9F%94%90-s%C3%A4kerhet-i-pipelinen">🔐 Säkerhet i pipelinen</h2>
<ul>
<li>SSH-nycklar hanteras säkert via GitHub Secrets</li>
<li>ProxyJump (bastion host) används för säker åtkomst till interna miljöer</li>
<li>Endast privata nycklar används (lösenordsfri autentisering)</li>
<li>HTTPS är aktiverat på webbservern via Let's Encrypt och Nginx</li>
</ul>
<h1 id="bilagor-till-koder-som-tillh%C3%B6r-webbapplikationen">Bilagor till koder som tillhör webbapplikationen</h1>
<p>Här hittar du samlade kodbilagor och konfigurationsfiler som hör till webbapplikationen. Dessa filer utgör viktiga delar av applikationens backend och servermiljö, och visar bland annat hur servern är uppsatt, hur databasen ansluts samt hur applikationen hanterar data.</p>
<h2 id="%F0%9F%93%84-cloud-configyaml">📄 cloud-config.yaml</h2>
<p>Denna fil används för att automatisera installationen och konfigureringen av LEMP-stacken (Linux, Nginx, MySQL-klient, PHP) på applikationsservern. Genom att använda denna cloud-config säkerställs att servern är korrekt förberedd med alla nödvändiga komponenter för att köra webbapplikationen.</p>
<pre class="hljs"><code><div><span class="hljs-comment">#cloud-config</span>
<span class="hljs-comment"># Application server with LEMP stack for Azure MySQL connectivity</span>

<span class="hljs-attr">package_update:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># Add external repositories</span>
<span class="hljs-attr">apt:</span>
  <span class="hljs-attr">sources:</span>
    <span class="hljs-attr">ondrej-php:</span>
      <span class="hljs-attr">source:</span> <span class="hljs-string">ppa:ondrej/php</span>

<span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">software-properties-common</span>  <span class="hljs-comment"># Required for adding PPAs</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">nginx</span>          <span class="hljs-comment"># Web server</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">php8.1-fpm</span>     <span class="hljs-comment"># PHP 8.1 FastCGI Process Manager (specific version)</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">php8.1-mysql</span>   <span class="hljs-comment"># PHP 8.1 MySQL extension</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">php8.1-cli</span>     <span class="hljs-comment"># PHP 8.1 command line interface</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-client</span>   <span class="hljs-comment"># MySQL client for testing</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">unzip</span>          <span class="hljs-comment"># For extracting files</span>

<span class="hljs-attr">write_files:</span>
  <span class="hljs-comment"># Configure Nginx to serve PHP files</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">path:</span> <span class="hljs-string">/etc/nginx/sites-available/default</span>
    <span class="hljs-attr">content:</span> <span class="hljs-string">|
      server {
          listen 80;
          root /var/www/html;
          index index.php index.html index.nginx-debian.html;
</span>
          <span class="hljs-string">server_name</span> <span class="hljs-string">_;</span>

          <span class="hljs-string">location</span> <span class="hljs-string">/</span> <span class="hljs-string">{</span>
              <span class="hljs-string">try_files</span> <span class="hljs-string">$uri</span> <span class="hljs-string">$uri/</span> <span class="hljs-string">=404;</span>
          <span class="hljs-string">}</span>

          <span class="hljs-string">location</span> <span class="hljs-string">~</span> <span class="hljs-string">\.php$</span> <span class="hljs-string">{</span>
              <span class="hljs-string">include</span> <span class="hljs-string">snippets/fastcgi-php.conf;</span>
              <span class="hljs-string">fastcgi_pass</span> <span class="hljs-string">unix:/var/run/php/php8.1-fpm.sock;</span>
          <span class="hljs-string">}</span>

          <span class="hljs-comment"># Health check endpoint</span>
          <span class="hljs-string">location</span> <span class="hljs-string">/health</span> <span class="hljs-string">{</span>
              <span class="hljs-string">access_log</span> <span class="hljs-string">off;</span>
              <span class="hljs-string">return</span> <span class="hljs-number">200</span> <span class="hljs-string">"Application server healthy\n"</span><span class="hljs-string">;</span>
              <span class="hljs-string">add_header</span> <span class="hljs-string">Content-Type</span> <span class="hljs-string">text/plain;</span>
          <span class="hljs-string">}</span>
      <span class="hljs-string">}</span>

<span class="hljs-attr">runcmd:</span>
  <span class="hljs-comment"># Set proper permissions for web directory</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">chown</span> <span class="hljs-string">-R</span> <span class="hljs-string">www-data:www-data</span> <span class="hljs-string">/var/www/html</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">chmod</span> <span class="hljs-string">-R</span> <span class="hljs-number">755</span> <span class="hljs-string">/var/www/html</span>

  <span class="hljs-comment"># Restart and enable services</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">systemctl</span> <span class="hljs-string">restart</span> <span class="hljs-string">nginx</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> <span class="hljs-string">nginx</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">systemctl</span> <span class="hljs-string">restart</span> <span class="hljs-string">php8.1-fpm</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> <span class="hljs-string">php8.1-fpm</span>
</div></code></pre>
<h2 id="%F0%9F%93%84-databasesetupphp">📄 database_setup.php</h2>
<p>Denna fil ansluter till Azure MySQL med säker SSL-anslutning och skapar tabellen contacts om den inte redan finns. Den används för att konfigurera databasen som webbapplikationen behöver.</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// Azure MySQL Database configuration</span>
<span class="hljs-comment">// Replace with your actual Azure MySQL server details</span>
<span class="hljs-comment">// CI/CD Pipeline</span>
$host = getenv(<span class="hljs-string">'MYSQL_HOST'</span>) ?: <span class="hljs-string">'mysql-webapp-01.mysql.database.azure.com'</span>;
$dbname = getenv(<span class="hljs-string">'MYSQL_DATABASE'</span>) ?: <span class="hljs-string">'contactforms'</span>;
$username = getenv(<span class="hljs-string">'MYSQL_USERNAME'</span>) ?: <span class="hljs-string">'mysqladmin'</span>;
$password = getenv(<span class="hljs-string">'MYSQL_PASSWORD'</span>) ?: <span class="hljs-string">'SecurePassword123!'</span>;

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Connect to Azure MySQL with SSL</span>
    $pdo = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">"mysql:host=$host;dbname=$dbname;charset=utf8mb4"</span>, $username, $password, [
        PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
        PDO::MYSQL_ATTR_SSL_CA =&gt; <span class="hljs-string">'/etc/ssl/certs/ca-certificates.crt'</span>
    ]);

    <span class="hljs-comment">// Create table if not exists (database-first approach for learning)</span>
    $pdo-&gt;exec(<span class="hljs-string">"CREATE TABLE IF NOT EXISTS contacts (
        id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(100) NOT NULL,
        email VARCHAR(100) NOT NULL,
        message TEXT NOT NULL,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        INDEX idx_created_at (created_at)
    )"</span>);

    <span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;!-- Database connection successful --&gt;\n"</span>;

} <span class="hljs-keyword">catch</span>(PDOException $e) {
    <span class="hljs-comment">// Log error and show user-friendly message</span>
    error_log(<span class="hljs-string">"Database connection failed: "</span> . $e-&gt;getMessage());
    <span class="hljs-keyword">die</span>(<span class="hljs-string">"Database connection failed. Please check configuration. Error: "</span> . $e-&gt;getMessage());
}
<span class="hljs-meta">?&gt;</span>
</div></code></pre>
<h2 id="%F0%9F%93%84-indexhtml">📄 index.html</h2>
<p>Startsidan för webbapplikationen som presenterar kontaktappens syfte och arkitektur. Den innehåller navigering till formulär och meddelandelista samt ger en översikt över tekniska funktioner.</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- CI/CD Pipeline --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Level 2.3: Azure MySQL Contact App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>📝 Azure MySQL Contact App - Max Oredson MOV24<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Level 2.3: LEMP Stack with Azure MySQL Flexible Server<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"index.html"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"contact_form.html"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>Contact Form<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"on_get_messages.php"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>View Messages<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Welcome!<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is a PHP contact form application running on Azure with secure database connectivity.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"features"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Architecture Features:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Contact form with Azure MySQL database storage<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Secure private network connectivity<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Azure Database for MySQL Flexible Server<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>SSL/TLS encrypted database connections<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Network Security Group protection<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Nginx web server with PHP-FPM<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<h2 id="%F0%9F%93%84-contactformhtml">📄 contact_form.html</h2>
<p>En webbsida med ett kontaktformulär där användare kan skicka namn, e-post och meddelande. Formuläret skickar data till servern för vidare hantering.</p>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- CI/CD Pipeline --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Contact Form - Azure MySQL Contact App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>✉️ Contact Form<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"index.html"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"contact_form.html"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn active"</span>&gt;</span>Contact Form<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"on_get_messages.php"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>View Messages<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"on_post_contact.php"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"contact-form"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"name"</span>&gt;</span>Name:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">required</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"email"</span>&gt;</span>Email:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">required</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"message"</span>&gt;</span>Message:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">required</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn submit-btn"</span>&gt;</span>Send Message<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<h2 id="%F0%9F%93%84-onpostcontactphp">📄 on_post_contact.php</h2>
<p>Denna fil tar emot och bearbetar data från kontaktformuläret. Den validerar inmatningen och sparar meddelandet i Azure MySQL-databasen samt lagrar en kopia i Azure Blob Storage.</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// CI/CD Pipeline</span>

<span class="hljs-keyword">if</span> (!defined(<span class="hljs-string">'CURLOPT_SSLVERSION'</span>)) {
    define(<span class="hljs-string">'CURLOPT_SSLVERSION'</span>, <span class="hljs-number">32</span>);
}
<span class="hljs-keyword">if</span> (!defined(<span class="hljs-string">'CURL_SSLVERSION_TLSv1_2'</span>)) {
    define(<span class="hljs-string">'CURL_SSLVERSION_TLSv1_2'</span>, <span class="hljs-number">6</span>);
}

<span class="hljs-comment">// Handle POST request for contact form submission</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">'database_setup.php'</span>;
<span class="hljs-keyword">require_once</span> <span class="hljs-string">'vendor/autoload.php'</span>; <span class="hljs-comment">// Azure SDK</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">MicrosoftAzure</span>\<span class="hljs-title">Storage</span>\<span class="hljs-title">Blob</span>\<span class="hljs-title">BlobRestProxy</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">MicrosoftAzure</span>\<span class="hljs-title">Storage</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Exceptions</span>\<span class="hljs-title">ServiceException</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">MicrosoftAzure</span>\<span class="hljs-title">Storage</span>\<span class="hljs-title">Blob</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">CreateBlockBlobOptions</span>;

<span class="hljs-keyword">if</span> ($_SERVER[<span class="hljs-string">'REQUEST_METHOD'</span>] == <span class="hljs-string">'POST'</span>) {
    $name = $_POST[<span class="hljs-string">'name'</span>] ?? <span class="hljs-string">''</span>;
    $email = $_POST[<span class="hljs-string">'email'</span>] ?? <span class="hljs-string">''</span>;
    $message = $_POST[<span class="hljs-string">'message'</span>] ?? <span class="hljs-string">''</span>;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">empty</span>($name) &amp;&amp; !<span class="hljs-keyword">empty</span>($email) &amp;&amp; !<span class="hljs-keyword">empty</span>($message)) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// === 1. Spara i databasen (din befintliga kod) ===</span>
            $stmt = $pdo-&gt;prepare(<span class="hljs-string">"INSERT INTO contacts (name, email, message) VALUES (?, ?, ?)"</span>);
            $stmt-&gt;execute([$name, $email, $message]);
            $success = <span class="hljs-keyword">true</span>;

            <span class="hljs-comment">// === 2. Skapa JSON av formulärsvar ===</span>
            $formData = [
                <span class="hljs-string">'name'</span> =&gt; $name,
                <span class="hljs-string">'email'</span> =&gt; $email,
                <span class="hljs-string">'message'</span> =&gt; $message,
                <span class="hljs-string">'timestamp'</span> =&gt; date(<span class="hljs-string">'c'</span>)
            ];
            $jsonData = json_encode($formData, JSON_PRETTY_PRINT);
            $filename = <span class="hljs-string">'formulärsvar_'</span> . time() . <span class="hljs-string">'_'</span> . uniqid() . <span class="hljs-string">'.json'</span>;

            <span class="hljs-comment">// === 3. Azure Blob Storage setup ===</span>
            $connectionString = <span class="hljs-string">"DefaultEndpointsProtocol=https;AccountName=blobresponses;AccountKey=bW4S5o6DgnNef09ZZsCDE3Q/gDMx04Z+J/J0xVBGdUIObcbOgvPt0utrvx6V8ejaMUxTn1UbWCO8+AStJc4ubA==;EndpointSuffix=core.windows.net"</span>;
            $containerName = <span class="hljs-string">'responses'</span>;

            $blobClient = BlobRestProxy::createBlobService($connectionString);
            $options = <span class="hljs-keyword">new</span> CreateBlockBlobOptions();
            $options-&gt;setContentType(<span class="hljs-string">"application/json"</span>);

            <span class="hljs-comment">// === 4. Spara JSON som blob ===</span>
            $blobClient-&gt;createBlockBlob($containerName, $filename, $jsonData, $options);

        } <span class="hljs-keyword">catch</span> (PDOException $e) {
            $error = <span class="hljs-string">"Error saving message: "</span> . $e-&gt;getMessage();
        } <span class="hljs-keyword">catch</span> (ServiceException $e) {
            $error = <span class="hljs-string">"Error saving to blob storage: "</span> . $e-&gt;getMessage();
        }
    } <span class="hljs-keyword">else</span> {
        $error = <span class="hljs-string">"All fields are required."</span>;
    }
}
<span class="hljs-meta">?&gt;</span>
&lt;!DOCTYPE html&gt;
&lt;html lang=<span class="hljs-string">"en"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span class="hljs-string">"UTF-8"</span>&gt;
    &lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;
    &lt;title&gt;Message Sent - Azure MySQL Contact App&lt;/title&gt;
    &lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"style.css"</span>&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>"&gt;
        &lt;<span class="hljs-title">header</span>&gt;
            &lt;<span class="hljs-title">h1</span>&gt;📨 <span class="hljs-title">Message</span> <span class="hljs-title">Status</span>&lt;/<span class="hljs-title">h1</span>&gt;
        &lt;/<span class="hljs-title">header</span>&gt;

        &lt;<span class="hljs-title">nav</span>&gt;
            &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">index</span>.<span class="hljs-title">html</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">Home</span>&lt;/<span class="hljs-title">a</span>&gt;
            &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">contact_form</span>.<span class="hljs-title">html</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">Contact</span> <span class="hljs-title">Form</span>&lt;/<span class="hljs-title">a</span>&gt;
            &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">on_get_messages</span>.<span class="hljs-title">php</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">View</span> <span class="hljs-title">Messages</span>&lt;/<span class="hljs-title">a</span>&gt;
        &lt;/<span class="hljs-title">nav</span>&gt;

        &lt;<span class="hljs-title">main</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">if</span> (<span class="hljs-title">isset</span>($<span class="hljs-title">success</span>)): ?&gt;
                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">success</span>-<span class="hljs-title">message</span>"&gt;
                    &lt;<span class="hljs-title">h2</span>&gt;✅ <span class="hljs-title">Message</span> <span class="hljs-title">Sent</span> <span class="hljs-title">Successfully</span>!&lt;/<span class="hljs-title">h2</span>&gt;
                    &lt;<span class="hljs-title">p</span>&gt;<span class="hljs-title">Thank</span> <span class="hljs-title">you</span> <span class="hljs-title">for</span> <span class="hljs-title">your</span> <span class="hljs-title">message</span>. <span class="hljs-title">It</span> <span class="hljs-title">has</span> <span class="hljs-title">been</span> <span class="hljs-title">saved</span> <span class="hljs-title">to</span> <span class="hljs-title">both</span> <span class="hljs-title">the</span> <span class="hljs-title">Azure</span> <span class="hljs-title">MySQL</span> <span class="hljs-title">database</span> <span class="hljs-title">and</span> <span class="hljs-title">Azure</span> <span class="hljs-title">Blob</span> <span class="hljs-title">Storage</span>.&lt;/<span class="hljs-title">p</span>&gt;
                &lt;/<span class="hljs-title">div</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">elseif</span> (<span class="hljs-title">isset</span>($<span class="hljs-title">error</span>)): ?&gt;
                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">error</span>-<span class="hljs-title">message</span>"&gt;
                    &lt;<span class="hljs-title">h2</span>&gt;❌ <span class="hljs-title">Error</span>&lt;/<span class="hljs-title">h2</span>&gt;
                    &lt;<span class="hljs-title">p</span>&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">htmlspecialchars</span>($<span class="hljs-title">error</span>); ?&gt;&lt;/<span class="hljs-title">p</span>&gt;
                &lt;/<span class="hljs-title">div</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">endif</span>; ?&gt;

            &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">actions</span>"&gt;
                &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">contact_form</span>.<span class="hljs-title">html</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">Send</span> <span class="hljs-title">Another</span> <span class="hljs-title">Message</span>&lt;/<span class="hljs-title">a</span>&gt;
                &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">on_get_messages</span>.<span class="hljs-title">php</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">View</span> <span class="hljs-title">All</span> <span class="hljs-title">Messages</span>&lt;/<span class="hljs-title">a</span>&gt;
            &lt;/<span class="hljs-title">div</span>&gt;
        &lt;/<span class="hljs-title">main</span>&gt;
    &lt;/<span class="hljs-title">div</span>&gt;
&lt;/<span class="hljs-title">body</span>&gt;
&lt;/<span class="hljs-title">html</span>&gt;
</span></div></code></pre>
<h2 id="%F0%9F%93%84-ongetmessagesphp">📄 on_get_messages.php</h2>
<p>Denna fil hämtar och visar alla inskickade kontaktmeddelanden från Azure MySQL-databasen.</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// CI/CD Pipeline</span>
<span class="hljs-comment">// Handle GET request to display all contact messages</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">'database_setup.php'</span>;

<span class="hljs-keyword">try</span> {
    $stmt = $pdo-&gt;prepare(<span class="hljs-string">"SELECT id, name, email, message, created_at FROM contacts ORDER BY created_at DESC"</span>);
    $stmt-&gt;execute();
    $messages = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
} <span class="hljs-keyword">catch</span>(PDOException $e) {
    $error = <span class="hljs-string">"Error retrieving messages: "</span> . $e-&gt;getMessage();
    $messages = [];
}
<span class="hljs-meta">?&gt;</span>
&lt;!DOCTYPE html&gt;
&lt;html lang=<span class="hljs-string">"en"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span class="hljs-string">"UTF-8"</span>&gt;
    &lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;
    &lt;title&gt;All Messages - Azure MySQL Contact App&lt;/title&gt;
    &lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"style.css"</span>&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>"&gt;
        &lt;<span class="hljs-title">header</span>&gt;
            &lt;<span class="hljs-title">h1</span>&gt;📋 <span class="hljs-title">All</span> <span class="hljs-title">Messages</span>&lt;/<span class="hljs-title">h1</span>&gt;
        &lt;/<span class="hljs-title">header</span>&gt;

        &lt;<span class="hljs-title">nav</span>&gt;
            &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">index</span>.<span class="hljs-title">html</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">Home</span>&lt;/<span class="hljs-title">a</span>&gt;
            &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">contact_form</span>.<span class="hljs-title">html</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">Contact</span> <span class="hljs-title">Form</span>&lt;/<span class="hljs-title">a</span>&gt;
            &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">on_get_messages</span>.<span class="hljs-title">php</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span> <span class="hljs-title">active</span>"&gt;<span class="hljs-title">View</span> <span class="hljs-title">Messages</span>&lt;/<span class="hljs-title">a</span>&gt;
        &lt;/<span class="hljs-title">nav</span>&gt;

        &lt;<span class="hljs-title">main</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">if</span> (<span class="hljs-title">isset</span>($<span class="hljs-title">error</span>)): ?&gt;
                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">error</span>-<span class="hljs-title">message</span>"&gt;
                    &lt;<span class="hljs-title">h2</span>&gt;❌ <span class="hljs-title">Error</span>&lt;/<span class="hljs-title">h2</span>&gt;
                    &lt;<span class="hljs-title">p</span>&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">htmlspecialchars</span>($<span class="hljs-title">error</span>); ?&gt;&lt;/<span class="hljs-title">p</span>&gt;
                &lt;/<span class="hljs-title">div</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">elseif</span> (<span class="hljs-title">empty</span>($<span class="hljs-title">messages</span>)): ?&gt;
                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">info</span>-<span class="hljs-title">message</span>"&gt;
                    &lt;<span class="hljs-title">h2</span>&gt;📭 <span class="hljs-title">No</span> <span class="hljs-title">Messages</span> <span class="hljs-title">Yet</span>&lt;/<span class="hljs-title">h2</span>&gt;
                    &lt;<span class="hljs-title">p</span>&gt;<span class="hljs-title">No</span> <span class="hljs-title">messages</span> <span class="hljs-title">have</span> <span class="hljs-title">been</span> <span class="hljs-title">submitted</span> <span class="hljs-title">yet</span>.&lt;/<span class="hljs-title">p</span>&gt;
                    &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="<span class="hljs-title">contact_form</span>.<span class="hljs-title">html</span>" <span class="hljs-title">class</span>="<span class="hljs-title">btn</span>"&gt;<span class="hljs-title">Send</span> <span class="hljs-title">First</span> <span class="hljs-title">Message</span>&lt;/<span class="hljs-title">a</span>&gt;
                &lt;/<span class="hljs-title">div</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">else</span>: ?&gt;
                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">messages</span>-<span class="hljs-title">count</span>"&gt;
                    &lt;<span class="hljs-title">p</span>&gt;<span class="hljs-title">Total</span> <span class="hljs-title">messages</span>: &lt;<span class="hljs-title">strong</span>&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">count</span>($<span class="hljs-title">messages</span>); ?&gt;&lt;/<span class="hljs-title">strong</span>&gt;&lt;/<span class="hljs-title">p</span>&gt;
                &lt;/<span class="hljs-title">div</span>&gt;

                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">messages</span>-<span class="hljs-title">list</span>"&gt;
                    &lt;?<span class="hljs-title">php</span> <span class="hljs-title">foreach</span> ($<span class="hljs-title">messages</span> <span class="hljs-title">as</span> $<span class="hljs-title">message</span>): ?&gt;
                        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">message</span>-<span class="hljs-title">item</span>"&gt;
                            &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">message</span>-<span class="hljs-title">header</span>"&gt;
                                &lt;<span class="hljs-title">h3</span>&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">htmlspecialchars</span>($<span class="hljs-title">message</span>['<span class="hljs-title">name</span>']); ?&gt;&lt;/<span class="hljs-title">h3</span>&gt;
                                &lt;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">message</span>-<span class="hljs-title">date</span>"&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">htmlspecialchars</span>($<span class="hljs-title">message</span>['<span class="hljs-title">created_at</span>']); ?&gt;&lt;/<span class="hljs-title">span</span>&gt;
                            &lt;/<span class="hljs-title">div</span>&gt;
                            &lt;<span class="hljs-title">p</span> <span class="hljs-title">class</span>="<span class="hljs-title">message</span>-<span class="hljs-title">email</span>"&gt;📧 &lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">htmlspecialchars</span>($<span class="hljs-title">message</span>['<span class="hljs-title">email</span>']); ?&gt;&lt;/<span class="hljs-title">p</span>&gt;
                            &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">message</span>-<span class="hljs-title">content</span>"&gt;
                                &lt;<span class="hljs-title">p</span>&gt;&lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> <span class="hljs-title">nl2br</span>(<span class="hljs-title">htmlspecialchars</span>($<span class="hljs-title">message</span>['<span class="hljs-title">message</span>'])); ?&gt;&lt;/<span class="hljs-title">p</span>&gt;
                            &lt;/<span class="hljs-title">div</span>&gt;
                        &lt;/<span class="hljs-title">div</span>&gt;
                    &lt;?<span class="hljs-title">php</span> <span class="hljs-title">endforeach</span>; ?&gt;
                &lt;/<span class="hljs-title">div</span>&gt;
            &lt;?<span class="hljs-title">php</span> <span class="hljs-title">endif</span>; ?&gt;
        &lt;/<span class="hljs-title">main</span>&gt;
    &lt;/<span class="hljs-title">div</span>&gt;
&lt;/<span class="hljs-title">body</span>&gt;
&lt;/<span class="hljs-title">html</span>&gt;
</span></div></code></pre>
<h2 id="%F0%9F%93%84-stylecss">📄 style.css</h2>
<p>Denna fil innehåller enkel och ren styling för webbapplikationen, inklusive layout, färger, knappar, formulär och responsiv design för bättre användarupplevelse på olika enheter.</p>
<pre class="hljs"><code><div><span class="hljs-comment">/* 🌐 Modern CSS for Contact Webapp - CI/CD Pipeline Ready */</span>

<span class="hljs-comment">/* Reset &amp; Base Styles */</span>
* {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, Tahoma, Geneva, Verdana, sans-serif;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f7fa</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
}

<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">900px</span>;
  <span class="hljs-attribute">margin</span>: auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.08</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
}

<span class="hljs-comment">/* Header */</span>
<span class="hljs-selector-tag">header</span> {
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">1.5rem</span>;
}

<span class="hljs-selector-tag">header</span> <span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5rem</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
}

<span class="hljs-selector-tag">header</span> <span class="hljs-selector-tag">p</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.1rem</span>;
}

<span class="hljs-comment">/* Navigation */</span>
<span class="hljs-selector-tag">nav</span> {
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;
}

<span class="hljs-selector-class">.btn</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.6rem</span> <span class="hljs-number">1.2rem</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0.3rem</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">text-decoration</span>: none;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2980b9</span>;
}

<span class="hljs-selector-class">.btn</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2c3e50</span>;
}

<span class="hljs-selector-class">.btn</span><span class="hljs-selector-class">.submit-btn</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#27ae60</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
}

<span class="hljs-selector-class">.btn</span><span class="hljs-selector-class">.submit-btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#219150</span>;
}

<span class="hljs-comment">/* Main Content */</span>
<span class="hljs-selector-tag">main</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;
}

<span class="hljs-comment">/* Features Section */</span>
<span class="hljs-selector-class">.features</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ecf0f1</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.5rem</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1.5rem</span>;
}

<span class="hljs-selector-class">.features</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.75rem</span>;
}

<span class="hljs-selector-class">.features</span> <span class="hljs-selector-tag">ul</span> {
  <span class="hljs-attribute">list-style</span>: none;
  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.features</span> <span class="hljs-selector-tag">li</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">1.5rem</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
}

<span class="hljs-selector-class">.features</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">"✓"</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#27ae60</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-comment">/* Contact Form */</span>
<span class="hljs-selector-class">.contact-form</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#dee2e6</span>;
}

<span class="hljs-selector-class">.form-group</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1.5rem</span>;
}

<span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">label</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
}

<span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">input</span>,
<span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">textarea</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.75rem</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ced4da</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">transition</span>: border-color <span class="hljs-number">0.2s</span> ease;
}

<span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span>,
<span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">textarea</span><span class="hljs-selector-pseudo">:focus</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">outline</span>: none;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">52</span>, <span class="hljs-number">152</span>, <span class="hljs-number">219</span>, <span class="hljs-number">0.3</span>);
}

<span class="hljs-comment">/* System Messages */</span>
<span class="hljs-selector-class">.success-message</span>,
<span class="hljs-selector-class">.error-message</span>,
<span class="hljs-selector-class">.info-message</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
}

<span class="hljs-selector-class">.success-message</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#d4edda</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#155724</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#c3e6cb</span>;
}

<span class="hljs-selector-class">.error-message</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8d7da</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#721c24</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5c6cb</span>;
}

<span class="hljs-selector-class">.info-message</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#d1ecf1</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#0c5460</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#bee5eb</span>;
}

<span class="hljs-selector-class">.actions</span> {
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1.5rem</span>;
}

<span class="hljs-comment">/* Message List */</span>
<span class="hljs-selector-class">.messages-count</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e8f4fd</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.75rem</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1.5rem</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
}

<span class="hljs-selector-class">.messages-list</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.25rem</span>;
}

<span class="hljs-selector-class">.message-item</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e9ecef</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.25rem</span>;
}

<span class="hljs-selector-class">.message-header</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: space-between;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.75rem</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">0.5rem</span>;
}

<span class="hljs-selector-class">.message-header</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
}

<span class="hljs-selector-class">.message-date</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;
}

<span class="hljs-selector-class">.message-email</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
}

<span class="hljs-selector-class">.message-content</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#555</span>;
}

<span class="hljs-selector-class">.message-content</span> <span class="hljs-selector-tag">p</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* Responsive Design */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width:</span> <span class="hljs-number">600px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
  }

  <span class="hljs-selector-class">.message-header</span> {
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">align-items</span>: flex-start;
  }

  <span class="hljs-selector-class">.message-date</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0.5rem</span>;
  }

  <span class="hljs-selector-class">.btn</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">1rem</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;
  }
}
</div></code></pre>
<h2 id="%F0%9F%93%84-reverse-proxy-konfiguration">📄 Reverse Proxy-konfiguration</h2>
<p><strong>/etc/nginx/sites-available/default</strong> är Nginx-konfigurationsfilen som används för att ställa in reverse proxy på din server. Den definierar hur inkommande HTTP-förfrågningar tas emot och vidarebefordras till backend-applikationer eller servrar, vilket gör att Nginx agerar som en mellanhand som hanterar trafik och säkerställer smidig kommunikation mellan klient och applikation.</p>
<pre class="hljs"><code><div>server {
  server_name wavvy.se www.wavvy.se;  <span class="hljs-comment"># &lt;-- Sätt din domän här</span>

  location / {
    proxy_pass         http://10.0.1.4:80/;
    proxy_http_version 1.1;

    proxy_set_header   Upgrade <span class="hljs-variable">$http_upgrade</span>;
    proxy_set_header   Connection <span class="hljs-string">"upgrade"</span>;
    proxy_set_header   Host <span class="hljs-variable">$host</span>;
    proxy_cache_bypass <span class="hljs-variable">$http_upgrade</span>;

    proxy_set_header   X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;
    proxy_set_header   X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;
  }

    listen 443 ssl; <span class="hljs-comment"># managed by Certbot</span>
    ssl_certificate /etc/letsencrypt/live/wavvy.se/fullchain.pem; <span class="hljs-comment"># managed by Certbot</span>
    ssl_certificate_key /etc/letsencrypt/live/wavvy.se/privkey.pem; <span class="hljs-comment"># managed by Certbot</span>
    include /etc/letsencrypt/options-ssl-nginx.conf; <span class="hljs-comment"># managed by Certbot</span>
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; <span class="hljs-comment"># managed by Certbot</span>

}

server {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$host</span> = wavvy.se) {
        <span class="hljs-built_in">return</span> 301 https://<span class="hljs-variable">$host</span><span class="hljs-variable">$request_uri</span>;
    } <span class="hljs-comment"># managed by Certbot</span>


  listen 80 default_server;
  server_name wavvy.se www.wavvy.se;
    <span class="hljs-built_in">return</span> 404; <span class="hljs-comment"># managed by Certbot</span>


}
</div></code></pre>

</body>

</html>